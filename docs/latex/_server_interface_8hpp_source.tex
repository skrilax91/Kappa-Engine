\hypertarget{_server_interface_8hpp_source}{}\doxysection{Server\+Interface.\+hpp}
\label{_server_interface_8hpp_source}\index{include/KappaEngine/Network/ServerInterface.hpp@{include/KappaEngine/Network/ServerInterface.hpp}}
\mbox{\hyperlink{_server_interface_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00001}00001\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00002}00002\ \textcolor{comment}{//\ Created\ by\ leo\_b\ on\ 30/01/2023.}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00003}00003\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00005}00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00009}00009\ \textcolor{preprocessor}{\#include\ <asio.hpp>}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{net__message_8h}{net\_message.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_network_connection_8hpp}{NetworkConnection.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_network_queue_8hpp}{NetworkQueue.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00015}00015\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_network}{Network}}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00020}\mbox{\hyperlink{class_network_1_1_server_interface}{00020}}\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_network_1_1_server_interface}{ServerInterface}}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00022}00022\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00030}\mbox{\hyperlink{class_network_1_1_server_interface_a49efa3a23a5c0a22bee249163ea60e65}{00030}}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a49efa3a23a5c0a22bee249163ea60e65}{ServerInterface}}(\ uint16\_t\ port\ ):\ \mbox{\hyperlink{class_network_1_1_server_interface_ab09a9d64ef2cb7b9a8d486895069ceaf}{\_acceptor}}(\ \mbox{\hyperlink{class_network_1_1_server_interface_aca1d56d0519a47c1092d8f5c3540874e}{\_ioContext}},\ asio::ip::tcp::endpoint(\ asio::ip::tcp::v4(),\ port\ ))\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00033}\mbox{\hyperlink{class_network_1_1_server_interface_ae21aa37a4f8485c36cb77eca3d80138c}{00033}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_network_1_1_server_interface_ae21aa37a4f8485c36cb77eca3d80138c}{\string~ServerInterface}}()\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a349e51b9da76e7c210bf85bdc5fbe683}{Stop}}();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00045}\mbox{\hyperlink{class_network_1_1_server_interface_a9b06198b9e869409dd5bd7788a237365}{00045}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_network_1_1_server_interface_a9b06198b9e869409dd5bd7788a237365}{Start}}()\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a543f6836d8acaf1ed4614034e7d0731e}{WaitForClient}}();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_ad41e7487a238c3f823844c40cc11ae91}{\_threadContext}}\ =\ std::thread([\textcolor{keyword}{this}]()\ \{\ \mbox{\hyperlink{class_network_1_1_server_interface_aca1d56d0519a47c1092d8f5c3540874e}{\_ioContext}}.run();\ \});}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{catch}\ (std::exception\&\ e)\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}Server\ Exception:\ "{}}\ <<\ e.what()\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[SERVER]\ started"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00064}\mbox{\hyperlink{class_network_1_1_server_interface_a349e51b9da76e7c210bf85bdc5fbe683}{00064}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_a349e51b9da76e7c210bf85bdc5fbe683}{Stop}}()\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_aca1d56d0519a47c1092d8f5c3540874e}{\_ioContext}}.stop();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_network_1_1_server_interface_ad41e7487a238c3f823844c40cc11ae91}{\_threadContext}}.joinable())\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_ad41e7487a238c3f823844c40cc11ae91}{\_threadContext}}.join();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[SERVER]\ stopped"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00076}\mbox{\hyperlink{class_network_1_1_server_interface_a543f6836d8acaf1ed4614034e7d0731e}{00076}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_a543f6836d8acaf1ed4614034e7d0731e}{WaitForClient}}()\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_ab09a9d64ef2cb7b9a8d486895069ceaf}{\_acceptor}}.async\_accept(}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{keyword}{this}](std::error\_code\ ec,\ asio::ip::tcp::socket\ socket)\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ec)\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[SERVER]\ New\ connection:\ "{}}\ <<\ socket.remote\_endpoint()\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_ptr<Connection>\ newConnection\ =\ std::make\_shared<Connection>(}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_connection_af894bf71b52c8f6700013d3ef7be7f97a9aa1b03934893d7134a660af4204f2a9}{Connection::Owner::Server}},}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_aca1d56d0519a47c1092d8f5c3540874e}{\_ioContext}},}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::move(socket),}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a1b5bc300a68ffe76192539fc4efe5a79}{\_incomingMessages}}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[DEBUG]\ Testing\ client\ connection\ approval"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_network_1_1_server_interface_ad2842438902607b783f95b8551a05a60}{OnClientConnect}}(newConnection))\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[DEBUG]\ Connection\ approved,\ pushing\ back\ in\ connection\ pool"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.push\_back(std::move(newConnection));}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.back()-\/>ConnectToClient(\mbox{\hyperlink{class_network_1_1_server_interface_a838a575afe591b76ece71186471606a0}{\_idCounter}}++);}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}["{}}\ <<\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.back()-\/>GetID()\ <<\ \textcolor{stringliteral}{"{}]\ Connection\ approved"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}[-\/-\/-\/-\/-\/]\ Connection\ refused"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}[SERVER]\ New\ connection\ error:\ "{}}\ <<\ ec.message()\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a543f6836d8acaf1ed4614034e7d0731e}{WaitForClient}}();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00111}\mbox{\hyperlink{class_network_1_1_server_interface_a161092ddbc1248bcf322fd10665a327e}{00111}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_a161092ddbc1248bcf322fd10665a327e}{MessageClient}}(std::shared\_ptr<Connection>\&\ client,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_network_1_1_message}{Message}}\&\ msg\ )\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (client\ \&\&\ client-\/>IsConnected())\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ client-\/>Send(msg);}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_ae28df7444e6f103e6d9c24de05130767}{OnClientDisconnect}}(client);}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ client.reset();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.erase(std::remove(\mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.begin(),\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.end(),\ client),\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.end());}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00126}\mbox{\hyperlink{class_network_1_1_server_interface_a1a4ed7188e3c25ceb78bbd06e5243114}{00126}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_a1a4ed7188e3c25ceb78bbd06e5243114}{MessageAllClients}}(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_network_1_1_message}{Message}}\&\ msg,\ \textcolor{keyword}{const}\ std::shared\_ptr<Connection>\&\ ignore\ =\ \textcolor{keyword}{nullptr}\ )\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ invalidClientExists\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ client\ :\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}})\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (client\ \&\&\ client-\/>IsConnected())\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (client\ !=\ ignore)\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ client-\/>Send(msg);}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_ae28df7444e6f103e6d9c24de05130767}{OnClientDisconnect}}(client);}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ client.reset();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ invalidClientExists\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (invalidClientExists)\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.erase(std::remove(\mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.begin(),\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.end(),\ \textcolor{keyword}{nullptr}),\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.end());}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00150}\mbox{\hyperlink{class_network_1_1_server_interface_a2cea3ada487eb026255383a510b498cd}{00150}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_a2cea3ada487eb026255383a510b498cd}{Update}}(\textcolor{keywordtype}{size\_t}\ maxMessages\ =\ -\/1)\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ messageCount\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (messageCount\ <\ maxMessages\ \&\&\ !\mbox{\hyperlink{class_network_1_1_server_interface_a1b5bc300a68ffe76192539fc4efe5a79}{\_incomingMessages}}.empty())\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ msg\ =\ \mbox{\hyperlink{class_network_1_1_server_interface_a1b5bc300a68ffe76192539fc4efe5a79}{\_incomingMessages}}.popFront();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_server_interface_acbc251657d73e6de1c6466800c062633}{OnMessage}}(msg.remote,\ msg.msg);}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ messageCount++;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00163}\mbox{\hyperlink{class_network_1_1_server_interface_a50914906e843304a6a5f5a23c33455ac}{00163}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_network_1_1_server_interface_a50914906e843304a6a5f5a23c33455ac}{GetClientCount}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}}.size();}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00166}00166\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00173}\mbox{\hyperlink{class_network_1_1_server_interface_ab4f8815d9b75d2146faa40c80adcc744}{00173}}\ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_ptr<Connection>\ \mbox{\hyperlink{class_network_1_1_server_interface_ab4f8815d9b75d2146faa40c80adcc744}{GetClient}}(uint32\_t\ \textcolor{keywordtype}{id})\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ client\ :\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}})\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (client-\/>GetID()\ ==\ \textcolor{keywordtype}{id})\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ client;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00182}00182\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00184}00184\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00189}\mbox{\hyperlink{class_network_1_1_server_interface_a1b5bc300a68ffe76192539fc4efe5a79}{00189}}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_network_1_1_network_queue}{NetworkQueue<OwnedMessage>}}\ \mbox{\hyperlink{class_network_1_1_server_interface_a1b5bc300a68ffe76192539fc4efe5a79}{\_incomingMessages}};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00194}\mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{00194}}\ \ \ \ \ \ \ \ \ \ \ \ \ std::deque<std::shared\_ptr<Connection>>\ \mbox{\hyperlink{class_network_1_1_server_interface_a2ee251861a53061deb96b84e5dfd6ea0}{\_connections}};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00199}\mbox{\hyperlink{class_network_1_1_server_interface_aca1d56d0519a47c1092d8f5c3540874e}{00199}}\ \ \ \ \ \ \ \ \ \ \ \ \ asio::io\_context\ \mbox{\hyperlink{class_network_1_1_server_interface_aca1d56d0519a47c1092d8f5c3540874e}{\_ioContext}};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00204}\mbox{\hyperlink{class_network_1_1_server_interface_ad41e7487a238c3f823844c40cc11ae91}{00204}}\ \ \ \ \ \ \ \ \ \ \ \ \ std::thread\ \mbox{\hyperlink{class_network_1_1_server_interface_ad41e7487a238c3f823844c40cc11ae91}{\_threadContext}};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00209}\mbox{\hyperlink{class_network_1_1_server_interface_ab09a9d64ef2cb7b9a8d486895069ceaf}{00209}}\ \ \ \ \ \ \ \ \ \ \ \ \ asio::ip::tcp::acceptor\ \mbox{\hyperlink{class_network_1_1_server_interface_ab09a9d64ef2cb7b9a8d486895069ceaf}{\_acceptor}};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00214}\mbox{\hyperlink{class_network_1_1_server_interface_a838a575afe591b76ece71186471606a0}{00214}}\ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ \mbox{\hyperlink{class_network_1_1_server_interface_a838a575afe591b76ece71186471606a0}{\_idCounter}}\ =\ 4;}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00215}00215\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00218}00218\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00224}\mbox{\hyperlink{class_network_1_1_server_interface_ad2842438902607b783f95b8551a05a60}{00224}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_network_1_1_server_interface_ad2842438902607b783f95b8551a05a60}{OnClientConnect}}(\ std::shared\_ptr<Connection>\ client\ )\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00232}\mbox{\hyperlink{class_network_1_1_server_interface_ae28df7444e6f103e6d9c24de05130767}{00232}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_ae28df7444e6f103e6d9c24de05130767}{OnClientDisconnect}}(\ std::shared\_ptr<Connection>\ client\ )\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00233}00233\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00241}\mbox{\hyperlink{class_network_1_1_server_interface_acbc251657d73e6de1c6466800c062633}{00241}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_network_1_1_server_interface_acbc251657d73e6de1c6466800c062633}{OnMessage}}(\ std::shared\_ptr<Connection>\ client,\ \mbox{\hyperlink{struct_network_1_1_message}{Message}}\&\ msg\ )\ \{}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00245}00245\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_server_interface_8hpp_source_l00246}00246\ \}}

\end{DoxyCode}
